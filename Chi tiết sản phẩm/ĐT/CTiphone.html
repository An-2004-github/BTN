<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iPhone 16 Pro Max 256GB - Chi tiết sản phẩm</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../style.css">
</head>
<body class="ctsp">
<div id="header"></div>
    <main class="container my-4">
        <nav aria-label="breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../../index.html">Trang chủ</a></li>
                <li class="breadcrumb-item"><a href="../../Dienthoai.html">Điện thoại</a></li>
                <li class="breadcrumb-item active" aria-current="page">iPhone 16 Pro Max 256GB</li>
            </ol>
        </nav>

        <section class="product-detail-main">
            <div class="row">
                <div class="col-lg-6">
                    <div class="product-gallery">
                        <div class="main-image-container">
                            <!-- Cập nhật link ảnh chính với ảnh rõ nét -->
                            <img src="../../Images/ĐT Iphone/iphone_16_pro_max_desert_titan_3552a28ae0.jpg" alt="iPhone 16 Pro Max" class="img-fluid main-product-image" id="mainImage">
                        </div>
                        <div class="thumbnail-images">
                            <img src="../../Images/ĐT Iphone/thumnail_main.jpg" alt="Thumbnail main" class="thumbnail active" onclick="changeImage('../../Images/ĐT Iphone/iphone_16_pro_max_desert_titan_3552a28ae0.jpg')">
                            <img src="../../Images/ĐT Iphone/thumnail_iphone16_promax_1.jpg" alt="Thumbnail 1" class="thumbnail" onclick="changeImage('../../Images/ĐT Iphone/thumnail_1.jpg')">
                            <img src="../../Images/ĐT Iphone/thumnail_iphone16_promax_2.jpg" alt="Thumbnail 2" class="thumbnail" onclick="changeImage('../../Images/ĐT Iphone/thumnail_2.jpg')">
                            <img src="../../Images/ĐT Iphone/thumnail_iphone16_promax_3.jpg" alt="Thumbnail 3" class="thumbnail" onclick="changeImage('../../Images/ĐT Iphone/thumnail_3.jpg')">
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="product-info">
                        <h1 class="product-title">iPhone 16 Pro Max 256GB</h1>
                        <div class="product-meta">
                            <span>Thương hiệu: <a href="#" class="text-primary">Apple</a></span>
                            <span class="mx-2">|</span>
                            <span>SKU: AP-IP16PM256</span>
                        </div>

                        <div class="price-section">
                            <span class="price-newctsp" id="price-new">30.441.300 ₫</span>
                            <span class="price-oldctsp" id="price-old">34.990.000 ₫</span>
                            <span class="discount-badge" id="discount-badge">-13%</span>
                        </div>

                        <div class="variant-selection">
                            <p><strong>Chọn dung lượng:</strong></p>
                            <button class="storage-btn active" data-storage="256GB" data-price="30441300" data-price-old="34990000" data-discount="13" onclick="updatePriceAndStorage(this)">256GB</button>
                            <button class="storage-btn" data-storage="512GB" data-price="36891000" data-price-old="40990000" data-discount="10" onclick="updatePriceAndStorage(this)">512GB</button>
                            <br></br>
                            <p><strong>Chọn màu sắc:</strong></p>
                            <div class="colors">
                                <button class="color-swatch active" style="background-color: #F0F0F5;" data-color="white" onclick="changeProductImage('white')"></button>
                                <button class="color-swatch" style="background-color: #4a1f4d;" data-color="black" onclick="changeProductImage('black')"></button>
                            </div>
                        </div>

                        <div class="product-promo">
                            <p class="font-weight-bold mb-2">Ưu đãi đặc biệt:</p>
                            <ul>
                                <li><i class="fas fa-check-circle text-success"></i> Giảm thêm <strong>500.000đ</strong> khi thanh toán qua VNPAY.</li>
                                <li><i class="fas fa-check-circle text-success"></i> Hỗ trợ trả góp 0% lãi suất qua thẻ tín dụng.</li>
                                <li><i class="fas fa-check-circle text-success"></i> Miễn phí vận chuyển toàn quốc.</li>
                            </ul>
                        </div>
                        
                        <div class="quantity-section">
                            <p><strong>Số lượng:</strong></p>
                            <div class="quantity-selector">
                                <button class="btn-quantity" id="decrease-qty">-</button>
                                <input type="number" id="quantity" value="1" min="1">
                                <button class="btn-quantity" id="increase-qty">+</button>
                            </div>
                        </div>

                        <div class="product-buttons">
                            <button class="btn-buy-now">Mua ngay</button>
                            <button class="btn-add-cart"><i class="fas fa-cart-plus"></i> Thêm vào giỏ</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="product-description-specs mt-5">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab">Mô tả sản phẩm</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="specs-tab" data-toggle="tab" href="#specs" role="tab">Thông số kỹ thuật</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab">Đánh giá (3)</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="description" role="tabpanel">
                    <h4 class="mt-4">Thiết Kế Mới, Sức Mạnh Vượt Trội</h4>
                    <p>iPhone 16 Pro Max mang đến trải nghiệm đột phá với camera 48MP, màn hình Super Retina XDR, chip A17 Bionic mạnh mẽ, và nhiều tính năng tiên tiến. Mẫu điện thoại này sẽ là lựa chọn lý tưởng cho những ai yêu thích công nghệ hiện đại.</p>
                </div>
                <div class="tab-pane fade" id="specs" role="tabpanel">
                    <h4 class="mt-4">Thông số kỹ thuật chi tiết iPhone 16 Pro Max 256GB</h4>
                    <table class="table table-striped table-bordered mt-3">
                        <tbody>
                            <tr>
                                <th scope="row">Màn hình</th>
                                <td>6.7 inch Super Retina XDR</td>
                            </tr>
                            <tr>
                                <th scope="row">Chip</th>
                                <td>A17 Bionic</td>
                            </tr>
                            <tr>
                                <th scope="row">Camera</th>
                                <td>48MP chính, 12MP siêu rộng</td>
                            </tr>
                            <tr>
                                <th scope="row">Dung lượng</th>
                                <td>256GB</td>
                            </tr>
                            <tr>
                                <th scope="row">Pin</th>
                                <td>Capacitive 5000mAh</td>
                            </tr>
                            <tr>
                                <th scope="row">Kết nối</th>
                                <td>5G, Wi-Fi 6E, Bluetooth 5.3</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="reviews" role="tabpanel">
                    <h4 class="mt-4">Đánh giá từ khách hàng</h4>
                </div>
            </div>
            <div id="toast" style="visibility: hidden; min-width: 250px; background-color: #4CAF50; color: white; text-align: center; border-radius: 8px; padding: 16px; position: fixed; z-index: 1000; left: 50%; top: 50%; transform: translate(-50%, -50%); font-size: 17px; opacity: 0; transition: opacity 0.5s ease-in-out;">

        </section>
        <!-- Sản phẩm tương tự -->
        <section class="related-products mt-5">
            <h3 class="text-center mb-4">Sản phẩm tương tự</h3>
            <div class="row" id="related-products-container">
                <!-- Sản phẩm sẽ được thêm vào đây thông qua JavaScript -->
            </div>
        </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
        // Lắng nghe sự kiện cho nút "Thêm vào giỏ hàng" trong phần sản phẩm tương tự
        const relatedProductsContainer = document.getElementById('related-products-container');
        relatedProductsContainer.addEventListener('click', function(event) {
            // Kiểm tra xem người dùng có nhấn vào nút "Thêm vào giỏ hàng" hay không
            if (event.target && event.target.classList.contains('add-cart')) {
                // Lấy tên sản phẩm
                const productName = event.target.closest('.productctsp-card').querySelector('.card-title').textContent.trim();
                showToast(`Đã thêm "${productName}" vào giỏ!`);  // Hiển thị thông báo toast
            }
        });

        // Hàm hiển thị thông báo toast
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.visibility = 'visible';
            toast.style.opacity = '1';
            
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => {
                    toast.style.visibility = 'hidden';  // Ẩn toast sau khi hiển thị 2 giây
                }, 500);
            }, 2000);
        }

            window.changeImage = function(newSrc) {
                const mainImage = document.getElementById('mainImage');
                mainImage.src = newSrc;

                const thumbnails = document.querySelectorAll('.thumbnail-images .thumbnail');
                thumbnails.forEach(thumb => {
                    thumb.classList.remove('active');
                    if (thumb.src === newSrc) {
                        thumb.classList.add('active');
                    }
                });
            };
                // Hàm này sẽ thay đổi màu sắc chính khi người dùng nhấp vào nút màu
        const colorSwatches = document.querySelectorAll('.color-swatch');
        
        colorSwatches.forEach(swatch => {
            swatch.addEventListener('click', function() {
                // Xóa class 'active' khỏi tất cả các màu
                colorSwatches.forEach(s => s.classList.remove('active'));
                
                // Thêm class 'active' cho màu được chọn
                this.classList.add('active');
                
                // Bạn có thể thêm logic thay đổi ảnh sản phẩm hoặc các tính năng khác ở đây
                console.log('Selected color:', this.dataset.color);
            });
            const products = [
        {
            name: "iPhone 15 Pro Max 256GB",
            price: "28.341.900 ₫",
            image: "../../Images/ĐT Iphone/2023_9_20_638307989548944936_iphone-15-promax-xanh-1.jpg",
            link: "#",
        },
        {
            name: "iPhone 14 Pro Max 128GB",
            price: "24.392.000 ₫",
            image: "../../Images/ĐT Iphone/2022_11_30_638054217303176240_ip-14-pro-max-bac-1.jpg",
            link: "#",
        },
        {
            name: "iPhone 13 Pro Max 128GB",
            price: "22.091.500 ₫",
            image: "../../Images/ĐT Iphone/2022_3_28_637840956036926900_iphone-13-pro-max-xanhreu-1.jpg",
            link: "#",
        },
        {
            name: "iPhone 12 Pro Max 128GB",
            price: "14.691.600 ₫",
            image: "../../Images/ĐT Iphone/4_185_2.jpg",
            link: "#",
        }
    ];
    function getRandomProducts(products, num) {
        let shuffled = products.slice();
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled.slice(0, num);
    }

    function displayRandomProducts() {
        const relatedProductsContainer = document.getElementById('related-products-container');
        const randomProducts = getRandomProducts(products, 4);  // Random 4 sản phẩm
        relatedProductsContainer.innerHTML = '';

        randomProducts.forEach(product => {
            const productHTML = `
                <div class="col-lg-3 col-md-4 col-6 mb-4">
                    <div class="productctsp-card h-100 d-flex flex-column">
                        <a href="${product.link}">
                            <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 250px; object-fit: contain; background: white; border-bottom: 1px solid #eee;">
                        </a>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title mb-2" style="font-size: 1rem; flex-grow: 1;">${product.name}</h5>
                            <h4 class="price-new mb-3">${product.price}</h4>
                            <button class="btn btn-danger btn-block add-cart mt-auto">Thêm vào giỏ hàng</button>
                        </div>
                    </div>
                </div>
            `;
            relatedProductsContainer.innerHTML += productHTML;
        });
    }

    // Gọi hàm hiển thị sản phẩm ngẫu nhiên khi trang được tải
    displayRandomProducts();

        });

        // Hàm này sẽ cập nhật giá, dung lượng và phần trăm giảm giá khi người dùng nhấp vào nút dung lượng
        window.updatePriceAndStorage = function(button) {
        const storage = button.getAttribute('data-storage');  // Lấy giá trị dung lượng từ nút
        const price = parseInt(button.getAttribute('data-price'));  // Lấy giá mới từ nút
        const priceOld = parseInt(button.getAttribute('data-price-old'));  // Lấy giá cũ từ nút
        const discountPercent = button.getAttribute('data-discount');  // Lấy phần trăm giảm giá từ nút
        
        // Cập nhật giá mới
        const priceNewElement = document.getElementById('price-new');
        priceNewElement.textContent = price.toLocaleString() + ' ₫';
        
        // Cập nhật giá cũ
        const priceOldElement = document.getElementById('price-old');
        priceOldElement.textContent = priceOld.toLocaleString() + ' ₫';
        
        // Cập nhật phần trăm giảm giá
        const discountElement = document.getElementById('discount-badge');
        discountElement.textContent = `-${discountPercent}%`;

        // Cập nhật tên sản phẩm với dung lượng đã chọn
        const storageTextElement = document.querySelector('.product-title');
        storageTextElement.textContent = 'iPhone 16 Pro Max ' + storage;
        
        // Thêm class "active" cho nút được chọn và bỏ "active" cho nút còn lại
        const storageButtons = document.querySelectorAll('.storage-btn');
        storageButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
    }; 
        const decreaseBtn = document.getElementById('decrease-qty');
        const increaseBtn = document.getElementById('increase-qty');
        const quantityInput = document.getElementById('quantity');

        decreaseBtn.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
            }
        });

        increaseBtn.addEventListener('click', function() {
            let currentValue = parseInt(quantityInput.value);
            quantityInput.value = currentValue + 1;
        });
});

    let selectedColor = 'white';  // Mặc định là màu trắng

    // Mảng đường dẫn cho ảnh thu nhỏ và ảnh chính
    const thumbnailPaths = {
        'white': [
            '../../Images/ĐT Iphone/thumnail_main.jpg',
            '../../Images/ĐT Iphone/thumnail_iphone16_promax_1.jpg',
            '../../Images/ĐT Iphone/thumnail_iphone16_promax_2.jpg',
            '../../Images/ĐT Iphone/thumnail_iphone16_promax_3.jpg',
            '../../Images/ĐT Iphone/iphone_16_pro_max_desert_titan_3552a28ae0.jpg', // Ảnh chính cho màu trắng
            '../../Images/ĐT Iphone/thumnail_1.jpg',
            '../../Images/ĐT Iphone/thumnail_2.jpg',
            '../../Images/ĐT Iphone/thumnail_3.jpg'
        ],
        'black': [
            '../../Images/ĐT Iphone/thumnail_main_black.jpg',
            '../../Images/ĐT Iphone/thumnail_iphone16_promax_4.jpg',
            '../../Images/ĐT Iphone/thumnail_iphone16_promax_5.jpg',
            '../../Images/ĐT Iphone/thumnail_iphone16_promax_6.jpg',
            '../../Images/ĐT Iphone/iphone_16_pro_max_black_titan_b3274fbf05.jpg', // Ảnh chính cho màu đen
            '../../Images/ĐT Iphone/thumnail_4.jpg',
            '../../Images/ĐT Iphone/thumnail_5.jpg',
            '../../Images/ĐT Iphone/thumnail_6.jpg'
        ]
    };

    // Hàm thay đổi màu sắc sản phẩm
    function changeProductImage(color) {
        selectedColor = color;  // Cập nhật màu sắc đã chọn
        const mainImage = document.getElementById('mainImage');
        const thumbnails = document.querySelectorAll('.thumbnail-images .thumbnail');
        
        // Cập nhật ảnh chính ban đầu theo màu đã chọn
        mainImage.src = thumbnailPaths[color][4]; // Ảnh chính đầu tiên của màu đã chọn
        
        // Cập nhật ảnh thu nhỏ cho tất cả các thumbnail
        thumbnails.forEach((thumb, index) => {
            thumb.src = thumbnailPaths[color][index]; // Thay đổi đường dẫn ảnh thu nhỏ theo màu sắc
        });

        // Cập nhật màu sắc của các swatch
        const colorSwatches = document.querySelectorAll('.color-swatch');
        colorSwatches.forEach(swatch => {
            swatch.classList.remove('active');
        });
        
        // Thêm class 'active' cho màu sắc đã chọn
        const selectedSwatch = document.querySelector(`.color-swatch[data-color=${color}]`);
        selectedSwatch.classList.add('active');
    }

    // Hàm thay đổi ảnh chính khi click vào thumbnail
    function changeMainImage(newSrc) {
        const mainImage = document.getElementById('mainImage');
        // Thay đổi ảnh chính khi click vào thumbnail
        mainImage.src = newSrc;
    }

    // Gắn sự kiện click cho tất cả các thumbnail
    document.querySelectorAll('.thumbnail-images .thumbnail').forEach((thumb, index) => {
        thumb.addEventListener('click', () => {
            const color = selectedColor;  // Dùng màu sắc hiện tại
            const mainImage = document.getElementById('mainImage');
            mainImage.src = thumbnailPaths[color][index + 4]; // Chọn ảnh lớn theo thumbnail
        });
    });

    </script>
    <div id="footer"></div>
    <script>
      fetch("../../footer.html")
        .then((res) => res.text())
        .then((data) => (document.getElementById("footer").innerHTML = data));
    </script>
    <script>
      fetch("../../header.html")
        .then((res) => res.text())
        .then((data) => (document.getElementById("header").innerHTML = data));
    </script>
</body>
</html>
