<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logitech G Pro X TKL Lightspeed - Chi tiết sản phẩm</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../style.css">
</head>
<body class="ctsp"> 
    <div id = 'header'></div>
    <main class="container my-4">
        <nav aria-label="breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="../../index.html">Trang chủ</a></li>
                <li class="breadcrumb-item"><a href="../../Phụ Kiện/Tatcaphukien.html">Phụ Kiện</a></li>
                <li class="breadcrumb-item"><a href="../../Phụ Kiện/banphim.html">Bàn Phím</a></li>
                <li class="breadcrumb-item active" aria-current="page">Logitech G Pro X TKL Lightspeed</li>
            </ol>
        </nav>

        <section class="product-detail-main">
            <div class="row">
                <div class="col-lg-6">
                    <div class="product-gallery">
                        <div class="main-image-container">
                            <img src="../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Đen.webp" 
                                alt="Logitech G Pro X TKL Lightspeed - Màu Đen" 
                                class="img-fluid main-product-image" id="mainImage">
                        </div>
                        <div class="thumbnail-images">
                            <img src="../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Đen.webp" 
                                alt="Thumbnail Logitech G Pro X TKL Lightspeed - Màu Đen" 
                                class="thumbnail active" 
                                onclick="changeImage(this.src, this.alt)"> <img src="../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed gt1.webp" 
                                alt="Thumbnail Logitech G Pro X TKL Lightspeed - Màu Trắng" 
                                class="thumbnail" 
                                onclick="changeImage(this.src, this.alt)">
                            <img src="../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed gt2.webp" 
                                alt="Thumbnail Logitech G Pro X TKL Lightspeed - Màu Hồng" s
                                class="thumbnail" 
                                onclick="changeImage(this.src, this.alt)">
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="product-info">
                        <h1 class="product-title">Logitech G Pro X TKL Lightspeed</h1>
                        <div class="product-meta">
                            <span>Thương hiệu: <a href="#" class="text-primary">Logitech</a></span>
                            <span class="mx-2">|</span>
                            <span>SKU: </span>
                        </div>

                        <div class="price-section">
                            <span class="price-newctsp">3.687.200 ₫</span>
                            <span class="price-oldctsp">4.190.000 ₫</span>
                            <span class="discount-badge">-12%</span>
                        </div>
                        
                        <div class="variant-selection">
                        <p><strong>Chọn màu sắc:</strong></p>
                        <div class="colors">
                            <button class="color-swatch active" style="background-color: black;"data-color="Đen"></button>
                            <button class="color-swatch" style="background-color: #ffffff;" data-color="Trắng"></button>
                            <button class="color-swatch" style="background-color: pink;" data-color="Hồng"></button>
                        </div>
                        </div>

                        <div class="product-promo">
                            <p class="font-weight-bold mb-2">Ưu đãi đặc biệt:</p>
                            <ul>
                                <li><i class="fas fa-check-circle text-success"></i> Giảm thêm <strong>500.000đ</strong> khi thanh toán qua VNPAY.</li>
                                <li><i class="fas fa-check-circle text-success"></i> Hỗ trợ trả góp 0% lãi suất qua thẻ tín dụng.</li>
                                <li><i class="fas fa-check-circle text-success"></i> Miễn phí vận chuyển toàn quốc.</li>
                            </ul>
                        </div>
                        
                        <div class="quantity-section">
                             <p><strong>Số lượng:</strong></p>
                             <div class="quantity-selector">
                                <button class="btn-quantity" id="decrease-qty">-</button>
                                <input type="number" id="quantity" value="1" min="1">
                                <button class="btn-quantity" id="increase-qty">+</button>
                            </div>
                        </div>

                        <div class="product-buttons">
                            <button class="btn-buy-now">Mua ngay</button>
                            <button class="btn-add-cart"><i class="fas fa-cart-plus"></i> Thêm vào giỏ</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="product-description-specs mt-5">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab">Mô tả sản phẩm</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="specs-tab" data-toggle="tab" href="#specs" role="tab">Thông số kỹ thuật</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab">Đánh giá (3)</a>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="description" role="tabpanel">
                    <h4 class="mt-4">Logitech G Pro X TKL Lightspeed: Thiết Kế Vì Chiến Thắng</h4>
                    <p>Một chiếc bàn phím chơi game không dây được các nhà vô địch tin tưởng, được thiết kế cho các cấp độ chơi thi đấu cao nhất. Được thiết kế cùng các chuyên gia và được chế tạo để giành chiến thắng.</p>
                </div>
                <div class="tab-pane fade" id="specs" role="tabpanel">
                    <h4 class="mt-4">Thông số kỹ thuật chi tiết iMac 24 inch M4 2024</h4>
                    <table class="table table-striped table-bordered mt-3">
                        <tbody>
                            <tr>
                                <th scope="row">Thương hiệu:</th>
                                <td>Logitech</td>
                            </tr>
                            <tr>
                                <th scope="row">Model</th>
                                <td>Logitech G Pro X TKL Light Speed</td>
                            </tr>
                             <tr>
                                <th scope="row">Màu sắc:</th>
                                <td>Đen, Trắng, Hồng</td>
                            </tr>
                            <tr>
                                <th scope="row">Kết nối:</th>
                                <td>3 chế độ:
                                . Lightspeed Wireless
                                . Lightspeed Bluetooth
                                . Có dây</td>
                            </tr>
                            <tr>
                                <th scope="row">Kiểu dáng:</th>
                                <td>Tenkeyless (TKL)</td>
                            </tr>
                            <tr>
                                <th scope="row">Size:</th>
                                <td>87 phím</td>
                            </tr>
                            <tr>
                                <th scope="row">Đèn led:</th>
                                <td>RGB LIGHTSYNC</td>
                            </tr>
                            <tr>
                                <th scope="row">Switch:</th>
                                <td>Tactile Switch</td>
                            </tr>
                            <tr>
                                <th scope="row">Kích thước:</th>
                                <td>Chiều cao: 34 mm

                                    Chiều rộng: 352 mm

                                    Chiều dày: 150 mm</td>
                            </tr>
                            <tr>
                                <th scope="row">Thời lượng pin:</th>
                                <td>Lên đến 50h</td>
                            </tr>
                            <tr>
                                <th scope="row">Phạm vị kết nối:</th>
                                <td>Lên đến 10m</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="reviews" role="tabpanel">
                    <h4 class="mt-4">Đánh giá từ khách hàng</h4>
                    </div>
            </div>
        </section>

         <section class="related-products mt-5">
            <h3 class="text-center mb-4">Sản phẩm tương tự</h3>
            <div class="row">
                </div>
        </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script src="../../sanpham.js"></script> 

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- KHAI BÁO BIẾN TOÀN CỤC CHO SCRIPT NÀY ---
        const mainImage = document.getElementById('mainImage');
        const thumbnails = document.querySelectorAll('.thumbnail-images .thumbnail');
        const colorSwatches = document.querySelectorAll('.color-swatch');
        const quantityInput = document.getElementById('quantity');
        const decreaseBtn = document.getElementById('decrease-qty');
        const increaseBtn = document.getElementById('increase-qty');
        const relatedContainer = document.querySelector('.related-products .row');
        const currentProductTitle = document.querySelector('.product-title').textContent;

        // --- HÀM TIỆN ÍCH ---
        function calcPriceNew(priceOld, discountPercent) {
            if (typeof priceOld !== 'number' || typeof discountPercent !== 'number') {
                // console.error("Invalid input for calcPriceNew: priceOld or discountPercent is not a number.");
                return priceOld; // Trả về giá cũ nếu đầu vào không hợp lệ
            }
            return priceOld * (1 - discountPercent / 100);
        }

        function formatPrice(price) {
            if (typeof price !== 'number' || isNaN(price)) {
                // console.error("Invalid input for formatPrice: price is not a number.");
                return 'N/A'; // Hoặc một giá trị mặc định khác
            }
            return price.toLocaleString("vi-VN") + " ₫";
        }

        // --- DỮ LIỆU ẢNH SẢN PHẨM THEO MÀU ---
        // Sếp cần cập nhật chính xác các đường dẫn hình ảnh cho sản phẩm này
        const productImagesByColor = {
            "Đen": {
                main: "../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Đen.webp",
                thumbnail_main: "../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Đen.webp"
            },
            "Trắng": {
                main: "../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Trắng.webp",
                thumbnail_main: "../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Trắng.webp"
            },
            "Hồng": {
                main: "../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Hồng.webp",
                thumbnail_main: "../Ảnh trong chi tiết sản phẩm/Logitech G Pro X TKL Lightspeed/Logitech G Pro X TKL Lightspeed Hồng.webp"
            }
        };

        // --- IMAGE GALLERY LOGIC ---
        window.changeImage = function(newSrc, newAlt) { // Thêm newAlt để cập nhật alt text
            if (mainImage) {
                mainImage.src = newSrc;
                if (newAlt) {
                    mainImage.alt = newAlt;
                }
            }

            thumbnails.forEach(thumb => {
                thumb.classList.remove('active');
                // So sánh phần cuối của src để tránh vấn đề với đường dẫn tuyệt đối/tương đối
                if (thumb.src.endsWith(newSrc.substring(newSrc.lastIndexOf('/') + 1))) {
                    thumb.classList.add('active');
                }
            });
        };
        
        // Gán sự kiện cho thumbnail ban đầu (nếu sếp không muốn dùng onclick trong HTML)
        thumbnails.forEach(thumb => {
            thumb.addEventListener('click', function() {
                changeImage(this.src, this.alt);
            });
        });


        // --- COLOR SWATCH LOGIC ---
        colorSwatches.forEach(swatch => {
            swatch.addEventListener('click', function() {
                colorSwatches.forEach(s => s.classList.remove('active'));
                this.classList.add('active');

                const selectedColor = this.dataset.color;
                const newImageData = productImagesByColor[selectedColor];

                if (newImageData && mainImage) {
                    mainImage.src = newImageData.main;
                    mainImage.alt = `Logitech G Pro X TKL Lightspeed - ${selectedColor}`;

                    if (thumbnails.length > 0 && newImageData.thumbnail_main) {
                        // Cập nhật thumbnail đầu tiên và gọi changeImage để đồng bộ trạng thái active
                        thumbnails[0].src = newImageData.thumbnail_main;
                        thumbnails[0].alt = `Thumbnail ${selectedColor}`;
                        changeImage(newImageData.thumbnail_main, `Thumbnail ${selectedColor}`); 
                    }
                } else if (!newImageData) {
                    console.warn(`Không tìm thấy cấu hình ảnh cho màu: ${selectedColor}`);
                }
            });
        });
        
        // --- LOGIC ĐẶT MÀU MẶC ĐỊNH KHI TẢI TRANG ---
        const defaultColor = "Đen"; // Màu mặc định khi tải trang
        const defaultColorSwatch = document.querySelector(`.color-swatch[data-color="${defaultColor}"]`);
        if (defaultColorSwatch) {
            // Giả lập một click để kích hoạt logic thay đổi ảnh và active class
            // Hoặc trực tiếp gọi hàm cập nhật ảnh như dưới
            const defaultImageData = productImagesByColor[defaultColor];
            if (defaultImageData && mainImage) {
                 mainImage.src = defaultImageData.main;
                 mainImage.alt = `Logitech G Pro X TKL Lightspeed - ${defaultColor}`;
                 if (thumbnails.length > 0 && defaultImageData.thumbnail_main) {
                    thumbnails[0].src = defaultImageData.thumbnail_main;
                    thumbnails[0].alt = `Thumbnail ${defaultColor}`;
                    changeImage(defaultImageData.thumbnail_main, `Thumbnail ${defaultColor}`);
                 }
                 colorSwatches.forEach(s => s.classList.remove('active'));
                 defaultColorSwatch.classList.add('active');
            }
        }


        // --- QUANTITY COUNTER LOGIC ---
        if(decreaseBtn && increaseBtn && quantityInput) {
            decreaseBtn.addEventListener('click', function() {
                let currentValue = parseInt(quantityInput.value);
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                }
            });

            increaseBtn.addEventListener('click', function() {
                let currentValue = parseInt(quantityInput.value);
                quantityInput.value = currentValue + 1; // Có thể thêm max limit nếu cần
            });
        }

        // --- BOOTSTRAP TABS INITIALIZATION ---
        $('#myTab a').on('click', function (e) {
            e.preventDefault();
            $(this).tab('show');
        });

        // --- HIỂN THỊ SẢN PHẨM TƯƠNG TỰ ---
        // Sếp đảm bảo biến "BanPhim" (hoặc tên biến trong sanpham.js) đã được tải và có dữ liệu
        const productsToShow = (typeof BanPhim !== 'undefined' && Array.isArray(BanPhim)) ? BanPhim : []; 

        if (productsToShow.length > 0 && relatedContainer && currentProductTitle) {
            const randomRelatedProducts = productsToShow
                .filter(p => p.name !== currentProductTitle) // Lọc sản phẩm Logitech khác
                .sort(() => 0.5 - Math.random())
                .slice(0, 4);

            if (randomRelatedProducts.length > 0) {
                let productsHTML = '';
                randomRelatedProducts.forEach(product => {
                    const priceNew = calcPriceNew(product.priceOld, product.discountPercent);
                    productsHTML += `
                        <div class="col-lg-3 col-md-4 col-6 mb-4">
                            <div class="productctsp-card h-100 d-flex flex-column">
                                <a href="#">
                                    <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 180px; object-fit: contain; background: white; border-bottom: 1px solid #eee; padding:10px;">
                                </a>
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title mb-2" style="font-size: 0.9rem; flex-grow: 1;">${product.name}</h5>
                                    <div class="d-flex justify-content-between align-items-center mb-1 flex-wrap">
                                        <span class="price-old">${formatPrice(product.priceOld)}</span>
                                        ${product.discountPercent > 0 ? `<span class="discount text-danger">-${product.discountPercent}%</span>` : ""}
                                    </div>
                                    <h4 class="price-new mb-3" style="font-size: 1.1rem;">${formatPrice(priceNew)}</h4>
                                    <button class="btn btn-danger btn-sm btn-block add-cart mt-auto">Thêm vào giỏ hàng</button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                relatedContainer.innerHTML = productsHTML;
            } else {
                relatedContainer.innerHTML = '<p class="col-12 text-center">Không có sản phẩm Logitech tương tự.</p>';
            }
        } else if (relatedContainer) {
            relatedContainer.innerHTML = '<p class="col-12 text-center">Chưa có dữ liệu sản phẩm tương tự.</p>';
        }
    });
    </script>
    <div id="footer"></div>
    <script>
      fetch("../../footer.html")
        .then((res) => res.text())
        .then((data) => (document.getElementById("footer").innerHTML = data));
    </script>
    <script>
      fetch("../../header.html")
        .then((res) => res.text())
        .then((data) => (document.getElementById("header").innerHTML = data));
    </script>
</body>
</html>