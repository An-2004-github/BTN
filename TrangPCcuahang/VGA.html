<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chua Dat Ten</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <!-- jQuery, Popper.js, Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <div id="header"></div>
    <div class="container my-3">
        <div class="container my-3 d-flex flex-wrap justify-content-between align-items-center gap-2 brand-container">
            <a href="../Trang PC của hãng/asus.html" class="brand-btn">
                <img src="../images/Logo/logo asus.jpg" alt="Asus" />
            </a>
            <a href="../Trang PC của hãng/epower.html" class="brand-btn">
                <img src="../images/Logo/logo epower.jpg" alt="E-power" />
            </a>
            <a href="../Trang PC của hãng/apple.html" class="brand-btn">
                <img src="../images/Logo/apple logo.png" alt="Apple" />
            </a>
            <a href="../Trang PC của hãng/lenovo.html" class="brand-btn">
                <img src="../images/Logo/logo lenovo.jpg" alt="Lenovo" />
            </a>
            <a href="../Trang PC của hãng/hp.html" class="brand-btn">
                <img src="../images/Logo/HP  logo.png" alt="Hp" />
            </a>
            <a href="../Trang PC của hãng/intel.html" class="brand-btn">
                <img src="../images/Logo/Intel.png" alt="Intel" />
            </a>
        </div>
    </div>
     <!-- Thanh bộ lọc  -->
    <div class="container p-3 bg-light rounded shadow-sm">
    <form>
        <!-- Bô lọc -->
        <div class="form-row mb-2">
        <div class="form-group col-md-2">
            <label for="priceSelect">Mức giá</label>
            <select id="priceSelect" class="form-control form-control-sm">
            <option>Chọn mức giá</option>
            <option>Dưới 10 triệu</option>
            <option>10 - 20 triệu</option>
            <option>20 - 30 triệu</option>
            <option>30 - 40 triệu</option>
            <option>Trên 40 triệu</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="osSelect">Nhu cầu</label>
            <select id="osSelect" class="form-control form-control-sm">
            <option>Nhu cầu</option>
            <option>PC Gaming</option>
            <option>PC Văn phòng</option>
            <option>PC Đồ họa</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="romSelect">Chọn CPU</label>
            <select id="romSelect" class="form-control form-control-sm">
            <option>Chọn CPU</option>
            <option>Apple M3</option>
            <option>Apple M4</option>
            <option>Intel Core i5</option>
            <option>Intel Core i3</option>
            <option>AMD Ryzen 7</option>
            <option>AMD Ryzen 5</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="connectSelect">RAM</label>
            <select id="connectSelect" class="form-control form-control-sm">
            <option>RAM</option>
            <option>32Gb</option>
            <option>16Gb</option>
            <option>8Gb</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="performanceSelect">Card đồ họa</label>
            <select id="performanceSelect" class="form-control form-control-sm">
            <option>Card đồ họa</option>
            <option>NVIDIA Geforce Series</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="networkSelect">Ổ cứng</label>
            <select id="networkSelect" class="form-control form-control-sm">
            <option>Ổ cứng</option>
            <option>SSD 240 GB</option>
            <option>SSD 256 GB</option>
            <option>SSD 512 GB</option>
            </select>
        </div>
        </div>
         <div class="form-group col-md-2">
            <button type="button" id="filterBtn" class="btn btn-warning btn-sm btn-block">LỌC</button>
        </div>
        </div>
    </form>
    </div>
    <!-- Khung danh sách sản phẩm -->
    <div class="container my-3">
        <div class="row" id="product-list">
        <!-- Sản phẩm tạo bằng JS -->
        </div>
    </div>
     <script>
        const products = [
            { 
            id: 1,
            name: "NVIDIA GeForce RTX 4090",
            image: "../images/Logo/VGA/NVIDIA GeForce RTX 4090.jpg",
            installment: "Trả góp 0%",
            priceOld: 69990000,
            discountPercent: 5,
            priceNew: 64990000,
            os: "PC Gaming",
            //cpu: "Intel Core i5",
            ssd: "SSD 512 GB",  // Ổ cứng
        },
        { 
            id: 2,
            name: "NVIDIA GeForce RTX 3060 Ti",
            image: "../images/Logo/VGA/NVIDIA GeForce RTX 3060 Ti.jpg",
            installment: "Trả góp 0%",
            priceOld: 12000000,
            discountPercent: 10,
            priceNew: 10500000,
            os: "PC Văn phòng",
            //cpu: "Intel Core i5",
            ssd: "SSD 240 GB",  // Ổ cứng
        },
        { 
            id: 3,
            name: "Kingston Fury Beast 8GB DDR4 3200MHz",
            image: "../images/Logo/RAM imgae/Kingston Fury Beast 8GB DDR4 3200MHz.jpg",
            installment: "Trả góp 0%",
            priceOld: 1099000,
            discountPercent: 5,
            priceNew: 699000,
            os: "PC Văn phòng",
            //cpu: "Intel Core i5",
            ssd: "SSD 512 GB",  // Ổ cứng
        },
        { 
            id: 4,
            name: "G.Skill Trident Z RGB",
            image: "../images/Logo/RAM imgae/G.Skill Trident Z RGB 32GB (2x16GB) DDR4 3600MHz.png",
            installment: "Trả góp 0%",
            priceOld: 4550000,
            discountPercent: 10,
            priceNew: 3100000,
            os: "PC Đồ họa",
            //cpu: "Intel Core i5",
            ssd: "SSD 512 GB",  // Ổ cứng
        },
        { 
            id: 24,
            name: "Corsair Vengeance LPX 16GB",
            image: "../images/Logo/RAM imgae/Corsair Vengeance LPX 16GB (2x8GB) DDR4 3600MHz.png",
            installment: "Trả góp 0%",
            priceOld: 2240000,
            discountPercent: 10,
            priceNew: 1490000,
            os: "PC Gaming",
            //cpu: "Intel Core i5",
            ssd: "SSD 512 GB",  // Ổ cứng
        },
        ];

       function formatPrice(price) {
        return price.toLocaleString("vi-VN") + " ₫";
    }
     function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.style.visibility = 'visible';
        toast.style.opacity = '1';
        
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
                toast.style.visibility = 'hidden';
            }, 500);
        }, 2000);
    }

    function addToCart() {
        const addCartButtons = document.querySelectorAll('.add-cart');
        addCartButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const productName = event.target.closest('.product-card').querySelector('h5').textContent;
                showToast(`Đã thêm "${productName}" vào giỏ!`);
            });
        });
    }

    // Hiển thị sản phẩm
    function displayProducts(list) {
        const productList = document.getElementById("product-list");
        productList.innerHTML = ""; // Clear current product list
        if (list.length === 0) {
            productList.innerHTML = "<div class='no-products'>Không có sản phẩm phù hợp!</div>";
            return;
        }

        list.forEach(product => {
            const col = document.createElement("div");
            col.className = "col-md-3 mb-4";
            col.innerHTML = `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.name}" />
                    <h5>${product.name}</h5>
                    <div>
                        <span class="price-old">${formatPrice(product.priceOld)}</span>
                        ${
                        product.discountPercent > 0
                        ? `<span class="discount">-${product.discountPercent}%</span>`
                        : ""
                        }
                    </div>
                    <h4><span class="price-new">${formatPrice(product.priceNew)}</span></h4>
                    <button class="add-cart">Thêm vào giỏ hàng</button>
                </div>
            `;
            productList.appendChild(col);
        });
    }

    // Hàm lọc sản phẩm theo các điều kiện
    function filterByPrice(minPrice, maxPrice, osSelect, romSelect, ssdSelect, ramSelect) {
        return products.filter(product => {
            // Lọc theo giá
            const priceFilter = product.priceNew >= minPrice && product.priceNew <= maxPrice;
            // Lọc theo Nhu cầu
            const osFilter = osSelect === "Nhu cầu" || product.os === osSelect;
            // Lọc theo CPU
            const cpuFilter = romSelect === "Chọn CPU" || product.cpu === romSelect;
            // Lọc theo Ổ cứng
            const ssdFilter = ssdSelect === "Ổ cứng" || product.ssd === ssdSelect;
            // Lọc theo RAM
            const ramFilter = ramSelect === "RAM" || product.ram === ramSelect;

            return priceFilter && osFilter && cpuFilter && ssdFilter && ramFilter;
        });
    }

    // Hàm lọc khi người dùng nhấn nút "Lọc"
    function handleFilter() {
        const priceSelect = document.getElementById("priceSelect").value;
        const osSelect = document.getElementById("osSelect").value;
        const romSelect = document.getElementById("romSelect").value;
        const ssdSelect = document.getElementById("networkSelect").value;
        const ramSelect = document.getElementById("connectSelect").value;

        let minPrice = 0;
        let maxPrice = Infinity;

        // Đặt giá trị min và max giá dựa trên lựa chọn của người dùng
        switch (priceSelect) {
            case "Dưới 10 triệu":
                maxPrice = 10000000;
                break;
            case "10 - 20 triệu":
                minPrice = 10000000;
                maxPrice = 20000000;
                break;
            case "20 - 30 triệu":
                minPrice = 20000000;
                maxPrice = 30000000;
                break;
            case "30 - 40 triệu":
                minPrice = 30000000;
                maxPrice = 40000000;
                break;
            case "Trên 40 triệu":
                minPrice = 40000000;
                maxPrice = Infinity;
                break;
        }

        // Lọc sản phẩm và hiển thị
        const filteredProducts = filterByPrice(minPrice, maxPrice, osSelect, romSelect, ssdSelect, ramSelect);
        displayProducts(filteredProducts);
    }

    // Gắn sự kiện cho nút "Lọc"
    document.getElementById("filterBtn").addEventListener("click", handleFilter);

    // Hiển thị tất cả sản phẩm khi trang được tải lần đầu
    window.onload = function() {
        displayProducts(products);
        addToCart(); // Gán sự kiện cho các nút "Thêm vào giỏ hàng"
    };
</script>
     </script>
    <div id="toast" style="
        visibility: hidden;
        min-width: 250px;
        background-color: #4CAF50;
        color: white;
        text-align: center;
        border-radius: 8px;
        padding: 16px;
        position: fixed;
        z-index: 1000;
        left: 50%;
        top: 50%;             
        transform: translate(-50%, -50%); 
        font-size: 17px;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        ">
    </div>

    <div id="footer"></div>
    <script>
        fetch('../footer.html')
        .then(res => res.text())
        .then(data => document.getElementById('footer').innerHTML = data);
    </script>
    <script>
        fetch('../header.html')
        .then(res => res.text())
        .then(data => document.getElementById('header').innerHTML = data);
    </script>
</body>
</html>