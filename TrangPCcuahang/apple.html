<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chua Dat Ten</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Bootstrap 4 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <header class="header">
        <div class="top-row">
            <img src="" alt="Logo" class="logo">
            <div class="center-group">
                <a href="#" class="menu-link">Giới thiệu</a>
                    <div class="dropdown">
                        <button class="menu-btn"><i class="fas fa-bars"></i> Danh mục</button>
                            <div class="dropdown-content">
                            <div class="submenu">
                                <a href="#">Điện thoại</a>
                                     <div class="submenu-content">
                                        <a href="#">Apple</a>
                                        <a href="#">Samsung</a>
                                        <a href="#">Oppo</a>
                                        <a href="#">Xiaomi</a>
                                        <a href="#">Huawei</a>
                                        <a href="#">Vivo</a>
                                    </div>
                            </div>

                            <div class="submenu">
                                <a href="#">Máy tính</a>
                                <div class="submenu-content">
                                    <a href="#">Apple</a>
                                    <a href="#">Lenovo</a>
                                    <a href="#">ASUS</a>
                                    <a href="#">Acer</a>
                                    <a href="#">HP</a>
                                    <a href="#">Dell</a>
                                </div>
                            </div>

                            <div class="submenu">
                                <a href="#">PC</a>
                                <div class="submenu-content">
                                    <a href="#">CPU</a>
                                    <a href="#">Mainboard</a>
                                    <a href="#">VGA</a>
                                    <a href="#">RAM</a>
                                    <a href="#">Vỏ PC</a>
                                    <a href="#">Thiết bị lưu trữ</a>
                                </div>
                            </div>

                            <div class="submenu">
                                <a href="#">Phụ kiện</a>
                                <div class="submenu-content">
                                    <a href="#">Chuột</a>
                                    <a href="#">Bàn phím</a>
                                    <a href="#">Tai nghe</a>
                                    <a href="#">Webcam</a>
                                </div>
                            </div>
                            </div>
                        </div>
                <div class="search-bar">
                    <input type="text" placeholder="Nhập tên điện thoại, máy tính, phụ kiện... cần tìm">
                    <button><i class="fas fa-search"></i></button>
                </div>
            </div>
            <div class="user-cart">
                <button class="icon-btn"><i class="fas fa-user"></i></button>
                <button class="cart-btn"><i class="fas fa-shopping-cart"></i> Giỏ hàng</button>
            </div>
        </div>
    </header>
     <!-- jQuery, Popper.js, Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <div class="container my-3">
        <div class="container my-3 d-flex flex-wrap justify-content-between align-items-center gap-2 brand-container">
            <a href="../TrangPCcuahang/" class="brand-btn">
                <img src="../images/Logo/logo asus.jpg" alt="Asus" />
            </a>
            <a href="../TrangPCcuahang/" class="brand-btn">
                <img src="../images/Logo/logo epower.jpg" alt="E-power" />
            </a>
            <a href="../TrangPccuahang/apple.html" class="brand-btn">
                <img src="../images/Logo/apple logo.png" alt="Apple" />
            </a>
            <a href="../TrangPCcuahang/" class="brand-btn">
                <img src="../images/Logo/logo lenovo.jpg" alt="Lenovo" />
            </a>
            <a href="../TrangPCcuahang/hp.html" class="brand-btn">
                <img src="../images/Logo/HP  logo.png" alt="Hp" />
            </a>
            <a href="../TrangPCcuahang/" class="brand-btn">
                <img src="../images/Logo/Intel.png" alt="Intel" />
            </a>
        </div>
    </div>
     <!-- Thanh bộ lọc nâng cao -->
    <div class="container p-3 bg-light rounded shadow-sm">
    <form>
        <!-- Hàng trên: 6 mục -->
        <div class="form-row mb-2">
        <div class="form-group col-md-2">
            <label for="priceSelect">Mức giá</label>
            <select id="priceSelect" class="form-control form-control-sm">
            <option>Chọn mức giá</option>
            <option>Dưới 10 triệu</option>
            <option>10 - 20 triệu</option>
            <option>20 - 30 triệu</option>
            <option>30 - 40 triệu</option>
            <option>Trên 40 triệu</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="osSelect">Nhu cầu</label>
            <select id="osSelect" class="form-control form-control-sm">
            <option>Nhu cầu</option>
            <option>PC Gaming</option>
            <option>PC Văn phòng</option>
            <option>PC Đồ họa</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="romSelect">Chọn CPU</label>
            <select id="romSelect" class="form-control form-control-sm">
            <option>Chọn CPU</option>
            <option>Apple M3</option>
            <option>Apple M4</option>
            <option>Intel Core i5</option>
            <option>Intel Core i3</option>
            <option>AMD Ryzen 7</option>
            <option>AMD Ryzen 5</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="connectSelect">RAM</label>
            <select id="connectSelect" class="form-control form-control-sm">
            <option>RAM</option>
            <option>32Gb</option>
            <option>16Gb</option>
            <option>8Gb</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="performanceSelect">Card đồ họa</label>
            <select id="performanceSelect" class="form-control form-control-sm">
            <option>Card đồ họa</option>
            <option>NVIDIA Geforce Series</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="networkSelect">Ổ cứng</label>
            <select id="networkSelect" class="form-control form-control-sm">
            <option>Ổ cứng</option>
            <option>SSD 240 GB</option>
            <option>SSD 256 GB</option>
            <option>SSD 512 GB</option>
            </select>
        </div>
        </div>
        <div class="form-group col-md-2">
            <button type="submit" class="btn btn-warning btn-sm btn-block">LỌC</button>
        </div>
        </div>
    </form>
    </div>
    <!-- Khung danh sách sản phẩm -->
    <div class="container my-3">
        <div class="row" id="product-list">
        <!-- Sản phẩm tạo bằng JS -->
        </div>
    </div>
     <script>
    const products = [
        {
            id: 1,
            name: "iMac 24 inch M4 2024",
            image: "../images/Logo/apple image/iMac 24 inch M4 2024.jpg",
            installment: "Trả góp 0%",
            priceOld: 39990000,
            discountPercent: 1,
            priceNew: 39600000,
            os: "PC Đồ họa",
            cpu: "Apple M3",
            ssd: "SSD 512 GB",  
        },
        {
            id: 2,
            name: "iMAC 24i 2023 M3",
            image: "../images/Logo/apple image/Mac mini M4 2024.jpeg",
            installment: "Trả góp 0%",
            priceOld: 39990000,
            discountPercent: 1,
            priceNew: 39600000,
            os: "PC Đồ họa",
            cpu: "Apple M4",
            ssd: "SSD 512 GB",  
        },
        {
            id: 3,
            name: "Mac mini M4 2024",
            image: "../images/Logo/apple image/Mac mini M4 Pro 2024.jpg",
            installment: "Trả góp 0%",
            priceOld: 14990000,
            discountPercent: 5,
            priceNew: 14240500,
            os: "PC Đồ họa",  
            cpu: "Apple M3", 
            ssd: "SSD 256 GB",  
        },
    ];

    function formatPrice(price) {
        return price.toLocaleString("vi-VN") + " ₫";
    }
    
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.style.visibility = 'visible';
        toast.style.opacity = '1';
        
        setTimeout(() => {
            toast.style.opacity = '0';
            setTimeout(() => {
                toast.style.visibility = 'hidden';
            }, 500);
        }, 2000);
    }

    function addToCart() {
        const addCartButtons = document.querySelectorAll('.add-cart');
        addCartButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const productName = event.target.closest('.product-card').querySelector('h5').textContent;
                showToast(`Đã thêm "${productName}" vào giỏ!`);
            });
        });
    }

    function displayProducts(list) {
        const productList = document.getElementById("product-list");
        productList.innerHTML = ""; // Clear current product list
        if (list.length === 0) {
            productList.innerHTML = "<div class='no-products'>Không có sản phẩm phù hợp!</div>";
            return;
        }

        list.forEach(product => {
            const col = document.createElement("div");
            col.className = "col-md-3 mb-4";
            col.innerHTML = `
                <div class="product-card">
                    <img src="${product.image}" alt="${product.name}" />
                    <h5>${product.name}</h5>
                    <div>
                        <span class="price-old">${formatPrice(product.priceOld)}</span>
                        ${
                        product.discountPercent > 0
                        ? `<span class="discount">-${product.discountPercent}%</span>`
                        : ""
                        }
                    </div>
                    <h4><span class="price-new">${formatPrice(product.priceNew)}</span></h4>
                    <button class="add-cart">Thêm vào giỏ hàng</button>
                </div>
            `;
            productList.appendChild(col);
        });

        addToCart(); // Ensure add to cart works after products are added
    }

    // Hàm lọc
    function handleFilter(event) {
        event.preventDefault(); // Prevent form submission
        const priceSelect = document.getElementById("priceSelect").value;
        const osSelect = document.getElementById("osSelect").value;
        const romSelect = document.getElementById("romSelect").value;
        const ssdSelect = document.getElementById("networkSelect").value;
        const ramSelect = document.getElementById("connectSelect").value;

        let minPrice = 0;
        let maxPrice = Infinity;

        // Đặt giá trị min và max giá dựa trên lựa chọn của người dùng
        switch (priceSelect) {
            case "Dưới 10 triệu":
                maxPrice = 10000000;
                break;
            case "10 - 20 triệu":
                minPrice = 10000000;
                maxPrice = 20000000;
                break;
            case "20 - 30 triệu":
                minPrice = 20000000;
                maxPrice = 30000000;
                break;
            case "30 - 40 triệu":
                minPrice = 30000000;
                maxPrice = 40000000;
                break;
            case "Trên 40 triệu":
                minPrice = 40000000;
                maxPrice = Infinity;
                break;
        }

        const filteredProducts = filterByPrice(minPrice, maxPrice, osSelect, romSelect, ssdSelect, ramSelect);
        displayProducts(filteredProducts);
    }

    // Hàm lọc sản phẩm theo các điều kiện
    function filterByPrice(minPrice, maxPrice, osSelect, romSelect, ssdSelect, ramSelect) {
        return products.filter(product => {
            // Lọc theo giá
            const priceFilter = product.priceNew >= minPrice && product.priceNew <= maxPrice;
            // Lọc theo Nhu cầu
            const osFilter = osSelect === "Nhu cầu" || product.os === osSelect;
            // Lọc theo CPU
            const cpuFilter = romSelect === "Chọn CPU" || product.cpu === romSelect;
            // Lọc theo Ổ cứng
            const ssdFilter = ssdSelect === "Ổ cứng" || product.ssd === ssdSelect;
            // Lọc theo RAM
            const ramFilter = ramSelect === "RAM" || product.ram === ramSelect;

            return priceFilter && osFilter && cpuFilter && ssdFilter && ramFilter;
        });
    }

    // Lắng nghe sự kiện khi người dùng nhấn nút Lọc
    document.querySelector("form").addEventListener("submit", handleFilter);

    // Hiển thị tất cả sản phẩm khi trang được tải lần đầu
    window.onload = function() {
        displayProducts(products);
        addToCart(); // Gán sự kiện cho các nút "Thêm vào giỏ hàng"
    };
</script>
     </script>
    <div id="toast" style="
        visibility: hidden;
        min-width: 250px;
        background-color: #4CAF50;
        color: white;
        text-align: center;
        border-radius: 8px;
        padding: 16px;
        position: fixed;
        z-index: 1000;
        left: 50%;
        top: 50%;             
        transform: translate(-50%, -50%); 
        font-size: 17px;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        ">
    </div>

    <section class="service-features">
      <div class="feature">
        <img src="../Images\footer\secure.png" alt="Đảm bảo" />
        <p><strong>Thương hiệu đảm bảo</strong><br>Nhập khẩu, bảo hành chính hãng</p>
      </div>
      <div class="feature">
        <img src="../Images\footer\exchange.png" alt="Đổi trả" />
        <p><strong>Đổi trả dễ dàng</strong><br>Theo chính sách đổi trả tại TechStore</p>
      </div>
      <div class="feature">
        <img src="../Images\footer\good-quality.png" alt="Chất lượng" />
        <p><strong>Sản phẩm chất lượng</strong><br>Đảm bảo tương thích và độ bền cao</p>
      </div>
      <div class="feature">
        <img src="../Images\footer\fast-delivery.png" alt="Giao hàng" />
        <p><strong>Giao hàng tận nơi</strong><br>Tại 63 tỉnh thành</p>
      </div>
    </section>
    <div id="footer"></div>
    <script>
        fetch('footer.html')
        .then(res => res.text())
        .then(data => document.getElementById('footer').innerHTML = data);
    </script>
    <script>
        fetch('header.html')
        .then(res => res.text())
        .then(data => document.getElementById('header').innerHTML = data);
    </script>
</body>
</html>
